{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2026-01-10 14:09:30.105215",
 "css": "/*.hr{ */\r\n/*    margin-top: 7px; */\r\n/*    margin-bottom: 7px; */\r\n/*} */\r\n/*.print-format{ */\r\n/*    font-size: 8pt;*/\r\n/*    padding: 30px !important;*/\r\n/*} */\r\n/*.print-format td, .print-format th{ */\r\n/*    padding: 3px !important; */\r\n/*}*/\r\n\r\n/* @media print {*/\r\n/*    @page {*/\r\n/*        size: A4;*/\r\n/*        margin: 20mm;*/\r\n/*    }*/\r\n/*    .page-break {*/\r\n/*        page-break-before: always;*/\r\n/*    }*/\r\n/*    .last-page footer {*/\r\n/*        position: relative;*/\r\n/*        bottom: 0;*/\r\n/*        display: table-footer-group; */\r\n/*    }*/\r\n/*    body {*/\r\n/*        font-size: 12px;*/\r\n/*    }*/\r\n/*}*/\r\n\r\n/*footer {*/\r\n/*    clear: both;*/\r\n/*    position: relative;*/\r\n/*    height: 200px;*/\r\n/*    margin-top: -200px;*/\r\n/*}*/\r\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n\r\n    <style>\r\n        @page {\r\n            size: A4;\r\n            margin: 15mm;\r\n        }\r\n\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            font-size: 11px;\r\n            color: #000;\r\n        }\r\n\r\n        .letter {\r\n            width: 100%;\r\n        }\r\n\r\n        .header img {\r\n            width: 100%;\r\n        }\r\n\r\n        .section-box {\r\n            border: 1px solid #000;\r\n            padding: 8px 12px;\r\n            min-height: 120px;\r\n        }\r\n\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            margin-top: 8px;\r\n            font-size: 10.5px;\r\n        }\r\n\r\n        th, td {\r\n            border: 1px solid #000;\r\n            padding: 4px 6px;\r\n            vertical-align: top;\r\n        }\r\n\r\n        th {\r\n            background: #e5e5e5;\r\n            font-weight: 700;\r\n            text-align: center;\r\n        }\r\n\r\n        .signature-section {\r\n            margin-top: 50px;\r\n            width: 100%;\r\n        }\r\n\r\n        .signature-section p {\r\n            font-weight: 700;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"letter\">\r\n\r\n    <div class=\"header\">\r\n        <img src=\"/files/letterpad.png\">\r\n\r\n        <center>\r\n            <p style=\"font-size:16px; font-weight:700; margin: 10px 0;\">\r\n                Delivery Note\r\n            </p>\r\n        </center>\r\n    </div>\r\n\r\n    <!-- CUSTOMER / SO DETAILS -->\r\n    <table style=\"width:100%; margin-top:5px;\">\r\n        <tr>\r\n            <td class=\"section-box\" style=\"width:50%;\">\r\n                <p><b>Customer Name:</b> {{doc.customer_name}} ({{doc.customer}})</p>\r\n                <p><b>Delivery Note No:</b> {{doc.name}}</p>\r\n                <p><b>Delivery Date:</b> {{ frappe.format(doc.posting_date, {'fieldtype': 'Date'}) }}</p>\r\n                <p><b>Delivery Address:</b></p>\r\n\r\n                {% if doc.customer_address %}\r\n                    {% set custom_full_address = frappe.db.get_value('Address', {'name':doc.customer_address}, ['custom_full_address']) %}\r\n                    <p>{{custom_full_address}}</p>\r\n                {% else %}\r\n                    <p>-</p>\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td class=\"section-box\" style=\"width:50%;\">\r\n                <p><b>Sales Order No:</b> {{doc.items[0].against_sales_order or ''}}</p>\r\n                <p><b>Contract No:</b> {{doc.custom_contract_no or ''}}</p>\r\n                <p><b>PO No:</b> {{doc.po_no or ''}}</p>\r\n                <p><b>Customer Ref Date:</b> {{doc.po_date or ''}}</p>\r\n\r\n                {% set sales_person = frappe.db.get_value('Sales Team', {'parent':doc.name}, ['sales_person']) %}\r\n                <p><b>Sales Person:</b> {{sales_person or ''}}</p>\r\n                <p><b>Contact Person:</b> </p>\r\n                <p><b>Phone No:</b></p>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- ITEMS TABLE -->\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th style=\"width:4%;\">SN</th>\r\n                <th style=\"width:7%;\">LPO SN</th>\r\n                <th style=\"width:48%; text-align:left;\">Product Description</th>\r\n                <th style=\"width:6%;\">UOM</th>\r\n                <th style=\"width:20%; text-align:left;\">Batch / Expiry</th>\r\n                <th style=\"width:9%;\">Qty</th>\r\n            </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n            {% set items_dict = {} %}\r\n            {% for i in doc.items %}\r\n                {% set item_code = i.item_code %}\r\n                {% if not items_dict.get(item_code) %}\r\n                    {% set item_details = frappe.db.get_value('Item', {'name': item_code}, ['country_of_origin', 'custom_manufacture_name', 'custom_catalogue_no']) %}\r\n                    {% set batch_no = i.batch_no or '' %}\r\n                    {% set expiry_date = frappe.db.get_value('Batch', {'name': i.batch_no}, ['expiry_date']) if i.batch_no else '' %}\r\n                    {% set expiry_date_str = frappe.format(expiry_date, {'fieldtype': 'Date'}) if expiry_date else '' %}\r\n                    {% set batch_expiry = (batch_no, expiry_date_str) %}\r\n                    {% set items_dict = items_dict.update({\r\n                        item_code: {\r\n                            'idx': i.idx,\r\n                            'item_code': item_code,\r\n                            'item_name': i.item_name,\r\n                            'custom_lpo_sn': [i.custom_lpo_sn] if i.custom_lpo_sn else [],\r\n                            'uom': i.uom,\r\n                            'qty': i.qty,\r\n                            'batches': [batch_expiry] if batch_expiry[0] else [],\r\n                            'country_of_origin': item_details[0] or '',\r\n                            'custom_manufacture_name': item_details[1] or '',\r\n                            'custom_catalogue_no': item_details[2] or ''\r\n                        }\r\n                    }) or items_dict %}\r\n                {% else %}\r\n                    {% set item = items_dict[item_code] %}\r\n                    {% set _ = item.update({'qty': item.qty + i.qty}) %}\r\n                    {% if i.custom_lpo_sn and i.custom_lpo_sn not in item.custom_lpo_sn %}\r\n                        {% set _ = item.custom_lpo_sn.append(i.custom_lpo_sn) %}\r\n                    {% endif %}\r\n                    {% if i.batch_no %}\r\n                        {% set expiry_date = frappe.db.get_value('Batch', {'name': i.batch_no}, ['expiry_date']) %}\r\n                        {% set expiry_date_str = frappe.format(expiry_date, {'fieldtype': 'Date'}) if expiry_date else '' %}\r\n                        {% set batch_expiry = (i.batch_no, expiry_date_str) %}\r\n                        {% set _ = item.batches.append(batch_expiry) %}\r\n                    {% endif %}\r\n                {% endif %}\r\n            {% endfor %}\r\n\r\n            {% for item_code, item in items_dict.items() %}\r\n            <tr>\r\n                <td style=\"text-align:center;\">{{ loop.index }}</td>\r\n                <td style=\"text-align:center;\">{{ ', '.join(item.custom_lpo_sn) }}</td>\r\n                <td>\r\n                    {{ item.item_name }} ({{ item.item_code }})\r\n                    <br>\r\n                    <span style=\"color:blue;\">\r\n                        MFG: {{ item.custom_manufacture_name }} / {{ item.country_of_origin }} / {{ item.custom_catalogue_no }}\r\n                    </span>\r\n                </td>\r\n                <td style=\"text-align:center;\">{{ item.uom }}</td>\r\n                <td>\r\n                    {% set batch_expiry_list = [] %}\r\n                    {% for batch in item.batches %}\r\n                        {% set batch_str = batch[0] + (' / ' + batch[1] if batch[1] else '') %}\r\n                        {% set _ = batch_expiry_list.append(batch_str) %}\r\n                    {% endfor %}\r\n                    {{ ', '.join(batch_expiry_list) or 'N/A' }}\r\n                </td>\r\n                <td style=\"text-align:center;\">{{ item.qty }}</td>\r\n            </tr>\r\n            {% endfor %}\r\n        </tbody>\r\n    </table>\r\n\r\n    <!-- SIGNATURE SECTION -->\r\n    <div class=\"signature-section\">\r\n        <p style=\"float:left; margin-left:20px;\">Customer Signature & Stamp</p>\r\n        <p style=\"float:right; margin-right:80px;\">Approved By</p>\r\n        <br><br>\r\n\r\n        {% set user_name,mobile,email = frappe.db.get_value('User', {'name':frappe.session.user}, ['full_name','mobile_no','email']) %}\r\n        <center>\r\n            <b>Issued By: {{user_name or ''}} / {{mobile or ''}} / {{email or ''}}</b>\r\n        </center>\r\n    </div>\r\n\r\n</div>\r\n\r\n</body>\r\n</html>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-01-10 14:11:08.003142",
 "modified_by": "Administrator",
 "module": "SRCo",
 "name": "DN V1.0",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}